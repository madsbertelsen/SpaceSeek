import React from 'react';
import * as RN from 'react-native';
import Animated, {
  useSharedValue,
  useAnimatedProps,
} from 'react-native-reanimated';
import Svg, { Circle as C, G, Path } from 'react-native-svg';
import { useTheme } from 'styled-components';

const Circle = Animated.createAnimatedComponent(C);

const radius = 10;
const DISTANCE = 10;
const SPEED_FACTOR = 0.06;

const initials = {
  first: radius * 2.15,
  second: radius * 2.35,
  third: radius * 2.55,
};

interface Props {
  height?: string | number;
  width?: string | number;
  fill?: string;
  style?: RN.ViewStyle;
}

export const SecondSpinner = (props: Props) => {
  const { mainFont: fill } = useTheme();

  const frameRef = React.useRef<any>(null);
  const currTime = useSharedValue(0);

  const y = {
    first: useSharedValue(initials.first),
    second: useSharedValue(initials.second),
    third: useSharedValue(initials.third),
  };

  const firstProps = useAnimatedProps(() => {
    return {
      cy: y.first.value,
    };
  });

  const secondProps = useAnimatedProps(() => {
    return {
      cy: y.second.value,
    };
  });

  const thirdProps = useAnimatedProps(() => {
    return {
      cy: y.third.value,
    };
  });

  const req = React.useCallback(() => {
    y.first.value = radius * 2 + radius * Math.sin(currTime.value - 3);
    y.second.value = radius * 2 + radius * Math.sin(currTime.value - 1);
    y.third.value = radius * 2 + radius * Math.sin(currTime.value - 2);
    currTime.value = currTime.value + SPEED_FACTOR;

    frameRef.current = requestAnimationFrame(req);
  }, [y, currTime]);

  React.useEffect(() => {
    req();

    return () => cancelAnimationFrame(frameRef.current);
  }, [req]);

  return (
    <Svg height={96} width={130} {...props} viewBox="0 0 1300 960">
      <G>
        <Path d="M660.3580404869854,415.64157880073674L661.2016217270472,415.80199421099746L662.8160466264428,417.4880670096178L663.6644631694519,417.7237592814457L664.5904609307797,416.62034389630344L666.2097460978183,418.56054791427994L665.7588562758202,419.40455009973243L665.7782640627479,420.46528367704775L663.8923298953233,420.1300409036288L662.7530129352566,420.93423534466046L660.9349643998637,419.5094212798789L658.8066409598265,418.67819902955205L659.7084039502288,417.7069436362651L658.8793535837057,416.87737615626827L659.3738693099623,415.95390650096033ZM665.9382368219415,415.5359842698276L667.121188013064,415.96236749923514L667.4460104369932,416.61611795831493L668.5077711512847,416.76360308726976L668.9053145258897,417.55118919908614L667.2133167428198,419.67303056567255L666.675175104456,419.32064023739565L665.1819490086889,416.64141522991986ZM669.7537227499483,414.11974050072126L670.1706822304305,414.6147223992373L672.0178091507971,414.9233961234837L671.886914784426,415.9159464705175L670.5197394252853,415.6120072167106L669.1622596367348,416.87737615626827L668.4059551777361,416.3040708028092L668.7501770696435,415.50646555634773L669.904024903248,415.3163865780856ZM647.8401430638288,413.77250801913624L649.6969822005323,414.9487636036471L650.3999651846829,416.06365861110726L649.8521196567789,416.90688656128566L647.9807496465368,416.27036087031684L647.8498552801658,415.3966132727352L646.8511365838582,414.394792935134ZM658.205473957074,412.54735920858127L657.803070314826,415.13472087632897L657.2406855944349,416.1100684302179L656.4165204602506,418.9764087840033L655.776562856186,418.13597347374855L655.8832058058846,416.4221567391253L657.4103788889145,414.4836223767953ZM691.6673190739667,410.4857036229306L692.1036530498836,411.20066313600717L694.9834456538209,413.0139792552312L695.0028367950017,413.82333772229526L694.2804626696711,415.240326812019L691.6624671252732,414.2424339679891L690.9497968973296,413.6666476802608L691.0661520712142,411.8212613246734ZM652.6591996368372,405.4962002398686L654.2881720555176,406.6756731932552L654.5839244134218,407.91269790954505L655.3305249828813,407.71171490232496L657.017687463004,409.8211261396632L657.0225227659513,412.35209995739774L656.4940850328233,413.99696420558723L654.4724045424845,414.64434233416705L651.1271995776574,413.6666476802608L651.4180833489689,413.030924650128L649.8569799244219,412.17380564712073L648.960068882714,411.0220312328447L649.1055190951673,409.8509801280775L648.4461786610224,408.32737477251885L647.6219802431928,407.4892168551512L648.5673774568029,406.55138455576775L649.4400370896865,407.2367146630811L650.3272608876019,406.5085367236984ZM672.8662256938053,404.3445527151655L673.3946800805292,406.0325928049042L672.6335236728353,406.55138455576775L671.9014539769133,405.68937276693055ZM654.9135904670957,399.6075020968127L655.7474678176166,401.81872698366374L655.4129498152491,403.3070511318035L654.7972352932111,403.2294729894494L654.6130028062441,401.96984745643726L655.2529604181574,401.1099492377557L654.6081508575508,400.5388559373324ZM670.1561180653988,397.6186874396735L672.1341643246817,398.366358547995L672.9147118657077,399.0132925661619L671.9741749197412,400.81579553106326L672.4686989649474,401.99576189194215L672.8274434114438,404.0347714559839L671.7560120912576,405.83528713902956L670.9463778306109,405.7580323394244L669.6228367025268,406.5771035561206L669.3125534710849,408.4897283550366L670.7524331273066,409.06187369602117L671.4263460375845,410.6602841108196L670.5439825151603,411.45152381435764L668.8325935830618,411.80002282077635L667.9453781119441,413.2090265400899L669.0507564115454,413.3107174808058L668.5755818970773,414.31437631656127L668.9537923788424,414.96989268561515L667.6787207847616,415.62047295276125L665.802490506876,414.492045696078L665.3516256574214,413.2344654230184L664.4256279039423,412.3054033214829L663.0148266326944,412.04217952935244L660.9495202459459,411.9997171909313L660.779835270415,410.68156242916814L659.5241631364645,409.7486509303038L660.5035489556283,409.1820161409513L660.5034906915907,408.19062845333167L659.8150718724718,407.03980051077474L660.1107992735281,406.3627843767596L659.3932770968909,404.774544886827L659.2672180256185,403.80234618641555L660.2853195441576,403.44922231771704L661.0270931296194,403.8453858905291L662.0354907586185,403.10879582769144L662.0209515582834,402.40585654681547L663.1214862359886,401.9439319093573L663.2814756409282,400.3959981563612L665.3273742485976,400.5604927155139L664.5662178409046,401.5119809042469L665.109211420114,402.1641489649412L665.4485813633279,403.6085705222837L666.1806677049959,403.8540171068016L666.3842663684478,402.5353241617371L667.6738854818134,401.07532590183075L667.4654099049715,399.21283738745615L669.0652956040319,397.91004629246333ZM640.742485870028,384.0927269232626L640.5921837088808,385.1550170209663L639.7631666338511,385.98044468948L640.1994839640208,386.95529938600316L639.2686509075938,388.7369584438745L638.090551665165,388.7325330293703L637.2712218339282,387.9771879403595L637.2760821015713,387.22088747221926L638.2069068390492,386.12677437288096L639.6855937423293,385.36373667854457ZM644.839759206395,417.4597986540946L644.6556681965022,417.5027498580961L644.0338284007086,417.9333092510831L643.2349216841606,417.2357444314948L641.6849952231759,417.0364261910638L641.0556403240334,416.5588623859246L639.9682716471226,416.6716316428847L638.6016289204823,416.3503465272902L638.0759958269313,414.56395860339137L638.5511287309566,412.60254502868986L638.1590281937353,410.9368442516361L638.4443193237912,409.94954642809205L637.9693528693846,408.5281540822584L636.3209726637763,408.0281361540392L635.108943087679,406.37997508284116L634.3187082871631,406.97552057969904L633.2133299875624,406.45709180014364L633.9453913645347,404.23272359880457L634.1360820166466,401.660686162249L634.9199002624606,402.0898628425406L635.8912133653829,401.13892916639236L635.1741822108036,398.63618762201963L633.4654398033086,397.91004629246333L633.7083866731173,396.010544022207L633.552699938624,391.3929013093391L633.8532792805261,389.813058057514L635.3174269913188,390.5969132055907L637.0773020953197,391.1335663751023L637.9742048180785,392.1834338223665L639.0020019072081,392.05172061130645L639.2056255353564,390.95765459978077L638.6674839048404,390.43408251942344L640.0831371169338,387.5792351702896L641.8672386650635,386.9818695904328L642.8126358865215,388.4852643649566L641.7508834911793,389.7690030412176L642.0466358490835,390.3328198910348L644.1167941923744,389.35019744615204L643.2441095947946,388.3262866058685L642.7447668845394,386.93316678592953L642.8368789685486,385.11061733435736L643.8404412946004,383.86131517419426L645.6439423107084,383.58530018876183L646.6814432893783,384.3195295951301L647.2340908287362,383.2323772802898L649.4545762900218,383.0418833540765L650.0799863826505,382.5603285873682L651.5101871061802,383.9502974196828L652.6543476881429,384.10158562941706L652.2955866037482,385.4081175526903L652.3974025772977,386.9110333659926L653.1585673117883,389.495704765248L653.0761424715726,390.70248170223226L653.5270156478236,391.2478541897002L654.889339058271,391.5642808689063L657.2988590179781,391.304959735628L658.3751672515535,392.6704310319242L657.9820347408254,394.25532870538393L656.5279737560486,396.0421058481784L655.1075018867547,396.1991117965906L653.4155124226343,395.0557197659108L652.0822840429086,396.7568640784598L651.8301908807568,397.5317123008033L652.4507323789439,399.3256591375615L652.2664915651796,401.019081022255L651.6653412081732,401.4255061298977L649.7357644828946,401.5119809042469L650.3272608876019,403.7678767492416L650.0703074499576,404.2800452531163L647.714092327202,404.9464090685093L647.9759143514378,406.54285053876436L646.7250775204346,407.4250432901167L646.4632804608945,408.5708595392491L646.9093100074017,410.29411023943044L647.5492676193146,411.21339552108975L647.3262528421371,412.08889635224125L646.4584451579474,412.08889635224125L645.4209441792775,413.04792779272555L646.5748003318312,414.5132486902404L647.7189442680478,415.24456226537393L647.9225679040442,417.3112671075987L646.8511365838582,417.15963405079015L646.4923754994638,416.4812201106373ZM659.9948435740191,378.5411916808241L659.4904408628578,379.75258752515765L658.7581464611276,380.34844630813643L657.5897677618332,379.70790634461616L658.0309370406975,379.03525196607427ZM655.451723778662,371.6627658336756L654.0021485518491,373.53143812123267L653.8518463985503,375.1098500808889L654.889339058271,376.6975544150373L654.5208907222346,378.14620273558694L654.763304959543,380.1827336301824L653.5124764553373,381.8953698870681L652.9064408581434,384.00370482491735L651.917434370325,383.98146250458115L650.9575062831769,383.08196984378253L649.4351851488406,382.970577800147L648.1213479102961,382.11859687348385L643.2344223431531,383.93697537456114L642.424788082507,383.1978077418963L640.3109871892107,383.9681411557873L639.1668432529945,384.7018996196374L638.3862873851704,384.60857339954543L638.0614566265959,386.0070582930789L636.810644768137,387.0792632921931L637.0239556479264,388.9311592090912L637.7220866833824,390.1038125192857L637.0384948404133,390.3812467123503L636.2676511889266,389.1781831229672L635.6422327773489,388.9796995533959L634.6047401176288,386.96861503840194L635.235002151103,385.394767059126L636.684585704713,383.1354551192245L637.9645009206906,381.81055723852637L639.0747228421882,382.2480436751516L641.0624646720604,381.2922815262367L642.9726252836134,381.6050680022005L644.7228131438216,381.2207661423365L645.8378786872157,380.3708247388796L646.7541725511556,379.1160254853461L648.1843649635838,376.16575805337084L649.6291298521451,374.1786771949768L650.8314472119044,374.3415409592965L652.7949542787001,373.59032989612774L654.5596813235467,372.00791794080476Z" />
      </G>
    </Svg>
  );
};
